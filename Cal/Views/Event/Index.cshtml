@model IEnumerable<Event>
@{
    ViewData["Title"] = "Событие";
}

<style>
    .category-color {
        width: 20px; /* Ширина элемента */
        height: 20px; /* Высота элемента */
        margin-right: 10px; /* Расстояние между элементом и временем события */
        flex-shrink: 0; /* Запрет уменьшения элемента при ограничении ширины */
    }

    ul {
        list-style-type: none;
        padding: 0;
    }

    li {
        margin-bottom: 20px; /* Расстояние между элементами списка */
    }

    span {
        font-size: 30px; /* Размер шрифта для времени */
        margin-right: 50px; /* Расстояние между временем и именем события */
    }

    a {
        color: black;
        text-decoration: none;
        cursor: pointer;
        font-size: 30px;
    }

    div.description {
        display: none;
        font-size: 30px;
        width: 1200px; /* Ширина блока описания */
        height: auto; /* Высота блока описания */
        overflow: auto; /* Добавляем полосы прокрутки, если содержимое превышает размеры блока */
        word-wrap: break-word;
    }
</style>

@if (!Model.Any())
{
    <h1>У вас ничего не запланировано на сегодня. Добавьте новое событие.</h1>
    <div>
        <a asp-controller="Event" asp-action="NewEvent" asp-route-date="@ViewBag.Date" style="background-color:black" class="btn btn-primary">Добавить событие</a>
    </div>
}
else
{
    <h1>Ваши планы на @Model.First().Date.ToShortDateString()</h1>
    <ul>
        @foreach (var Event in Model.OrderBy(e => e.Date))
        {
            <li style="display: flex; align-items: center;">
                <div class="category-color" style="background-color: @Event.Category.CategoryColor;"></div>
                <span>@Event.Date.ToShortTimeString()</span>
                <a style="color: black; text-decoration: none; cursor: pointer;" onclick="toggleDescription(@Event.Id)">@Event.Name</a>
                <div style="flex-grow: 1;"></div> <!-- Этот элемент занимает всю доступную ширину и создает пространство между названием и описанием -->
                <a asp-action="DeleteEvent" asp-route-id="@Event.Id">
                    <img src="icons/trash.png" style="width:30px; height:30px">
                </a>
                <a asp-action="EditEvent" asp-route-id="@Event.Id">
                    <img src="icons/pencil.png" style="width:30px; height:30px">
                </a>
            </li>
            <div id="description-@Event.Id" style="display: none; margin-top: 10px;" class="description">
                @Event.Description
            </div>

        }
    </ul>

    <div style="position:absolute; bottom:10%; background-color:black;">
        <a asp-controller="Event" asp-action="NewEvent" asp-route-date="@ViewBag.Date" style="background-color:black" class="btn btn-primary">Добавить событие</a>
    </div>
}

<script>
    function toggleDescription(eventId) {
        var descriptionElement = document.querySelector("#description-" + eventId);
        if (descriptionElement.style.display === "none" || descriptionElement.style.display === "") {
            descriptionElement.style.display = "block";
        } else {
            descriptionElement.style.display = "none";
        }
    }
</script>